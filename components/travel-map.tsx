"use client"

import { useRef } from "react"
import { useGSAP } from "@gsap/react"
import gsap from "gsap"
import { ScrollTrigger } from "gsap/ScrollTrigger"
import { GSAP_ANIMATIONS, GSAP_DURATION, GSAP_EASE, GSAP_STAGGER } from "@/lib/gsap-config"

gsap.registerPlugin(ScrollTrigger)

interface Location {
  id: number
  name: string
  state: string
  x: number // Posição X no mapa (%)
  y: number // Posição Y no mapa (%)
  description: string
  date: string
  eventId: number | null // ID do evento relacionado na timeline
}

const locations: Location[] = [
  {
    id: 2,
    name: "Russas",
    state: "Ceará",
    x: 65,
    y: 35,
    description: "Onde tudo começou, nossa cidade",
    date: "Agosto 2024",
    eventId: null,
  },
  {
    id: 1,
    name: "Fortaleza",
    state: "Ceará",
    x: 62,
    y: 22,
    description: "Primeiro encontro fora de Russas",
    date: "Dezembro 2024",
    eventId: 1,
  },
  {
    id: 3,
    name: "Canoa Quebrada",
    state: "Ceará",
    x: 70,
    y: 30,
    description: "Nossa primeira viagem juntos",
    date: "Junho 2025",
    eventId: 4,
  },
  {
    id: 4,
    name: "Maceió",
    state: "Alagoas",
    x: 80,
    y: 60,
    description: "CSBC 2025 e praia do Gunga",
    date: "Julho 2025",
    eventId: 6,
  },
]

export function TravelMap() {
  const sectionRef = useRef<HTMLDivElement>(null)
  const titleRef = useRef<HTMLHeadingElement>(null)
  const mapRef = useRef<SVGSVGElement>(null)

  useGSAP(
    () => {
      if (titleRef.current) {
        gsap.from(titleRef.current, {
          scrollTrigger: {
            trigger: titleRef.current,
            start: "top 80%",
            toggleActions: "play none none none",
          },
          ...GSAP_ANIMATIONS.fadeInUp(),
          duration: GSAP_DURATION.SLOW,
        })
      }

      if (mapRef.current) {
        gsap.from(mapRef.current, {
          scrollTrigger: {
            trigger: mapRef.current,
            start: "top 75%",
            toggleActions: "play none none none",
          },
          opacity: 0,
          duration: GSAP_DURATION.VERY_SLOW,
          ease: GSAP_EASE.SMOOTH,
        })
      }

      const pins = sectionRef.current?.querySelectorAll(".location-pin")
      if (pins) {
        gsap.from(pins, {
          scrollTrigger: {
            trigger: mapRef.current,
            start: "top 70%",
            toggleActions: "play none none none",
          },
          scale: 0,
          opacity: 0,
          duration: GSAP_DURATION.MEDIUM,
          stagger: GSAP_STAGGER.SLOW,
          ease: GSAP_EASE.BACK_STRONG,
          delay: 0.5,
        })
      }

      const paths = sectionRef.current?.querySelectorAll(".connection-path")
      paths?.forEach((path) => {
        const length = (path as SVGPathElement).getTotalLength()
        gsap.set(path, {
          strokeDasharray: length,
          strokeDashoffset: length,
        })
        gsap.to(path, {
          scrollTrigger: {
            trigger: mapRef.current,
            start: "top 65%",
            toggleActions: "play none none none",
          },
          strokeDashoffset: 0,
          duration: GSAP_DURATION.VERY_SLOW,
          ease: GSAP_EASE.SMOOTH,
          delay: 1,
        })
      })
    },
    { scope: sectionRef }
  )

  return (
    <section ref={sectionRef} className="py-4 px-4 relative overflow-x-hidden">
      <div className="max-w-6xl mx-auto">
        <div className="text-center mb-16">
          <h2
            ref={titleRef}
            className="text-5xl md:text-7xl font-bold text-balance mb-4"
            style={{ fontFamily: "var(--font-heading)" }}
          >
            Lugares que Exploramos
          </h2>
          <p className="text-muted-foreground text-lg md:text-xl text-pretty max-w-2xl mx-auto">
            Cada viagem é uma nova história, cada lugar um pedaço de nós
          </p>
        </div>

        <div className="relative">
          <div className="rounded-3xl">
            <svg
              ref={mapRef}
              viewBox="0 0 800 800"
              className="w-full h-auto"
              style={{
                filter: "drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))",
              }}
            >
              <defs>
                <pattern id="dots" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
                  <circle
                    cx="2"
                    cy="2"
                    r="1"
                    fill="currentColor"
                    className="text-muted-foreground/10"
                  />
                </pattern>

                <filter id="sketch">
                  <feTurbulence type="fractalNoise" baseFrequency="0.05" numOctaves="3" />
                  <feDisplacementMap in="SourceGraphic" scale="2" />
                </filter>
              </defs>

              <rect width="800" height="800" fill="url(#dots)" rx="24" />

              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M239.69 1.09865C238.452 1.69565 237.44 2.72164 237.44 3.37764C237.44 4.03464 236.793 5.87764 236.001 7.47464C233.765 11.9876 232.101 16.3036 232.279 17.1286C232.367 17.5406 231.99 17.8786 231.44 17.8786C230.89 17.8786 230.44 18.9337 230.44 20.2236C230.44 25.8636 221.22 28.9316 211.026 26.6836C206.871 25.7676 205.615 25.8677 202.894 27.3337C201.124 28.2867 199.182 30.1496 198.579 31.4726C197.976 32.7956 196.997 33.8787 196.402 33.8787C195.808 33.8787 195.6 34.3287 195.94 34.8787C196.891 36.4177 194.121 36.0667 190.344 34.1697C188.472 33.2287 184.133 32.2767 180.702 32.0537C177.272 31.8297 174.638 31.3617 174.851 31.0127C175.633 29.7257 167.611 29.9677 166.535 31.2647C164.787 33.3707 164.235 48.9877 165.863 50.2977C167.201 51.3747 171.485 62.8676 171.736 66.0556C171.809 66.9776 172.162 67.5506 172.521 67.3286C172.879 67.1076 173.941 67.7746 174.879 68.8116C176.497 70.5996 176.477 70.7316 174.499 71.3596C173.35 71.7246 172.638 72.3896 172.914 72.8376C173.191 73.2856 172.683 74.2616 171.785 75.0076C170.327 76.2176 170.234 76.0957 170.92 73.8707C171.343 72.4997 171.316 71.7326 170.86 72.1656C170.405 72.5986 169.957 74.1736 169.865 75.6656C169.773 77.1576 169.64 79.1016 169.569 79.9866C169.472 81.1886 167.955 81.7486 163.543 82.2096C160.3 82.5486 155.292 83.7546 152.413 84.8896C149.535 86.0236 146.953 86.7256 146.676 86.4476C146.399 86.1706 145.026 86.8456 143.625 87.9476C140.052 90.7586 125.52 90.6216 123.065 87.7526C122.182 86.7216 121.676 85.8786 121.94 85.8786C122.46 85.8786 119.568 82.1806 117.94 80.7626C109.229 73.1826 108.163 72.6567 102.975 73.3797C100.206 73.7657 93.8899 74.4446 88.9399 74.8876C76.7899 75.9746 65.2179 78.5986 63.6899 80.6126C63.0029 81.5196 62.4399 84.1227 62.4399 86.3987C62.4399 91.1807 66.8259 98.6767 70.8999 100.858C72.8319 101.891 73.1599 102.512 72.3139 103.53C71.7089 104.26 70.8029 104.603 70.3019 104.294C69.8009 103.984 69.4869 104.101 69.6049 104.555C69.7229 105.008 68.9939 107.911 67.9859 111.006L66.1519 116.633L69.2089 122.006C73.5619 129.656 75.7259 137.865 75.0519 144.174C74.3199 151.031 71.1239 161.905 68.7969 165.456C67.3689 167.636 66.9399 170.185 66.9399 176.49C66.9399 180.999 66.5979 184.476 66.1789 184.218C65.7599 183.959 61.0349 184.305 55.6789 184.987C50.3229 185.669 44.9699 186.261 43.7849 186.303C42.6009 186.345 41.7989 186.651 42.0049 186.984C42.6929 188.097 31.5729 195.079 30.3339 194.313C29.5879 193.852 29.3919 193.992 29.8179 194.682C30.2209 195.334 29.1469 196.482 27.2229 197.457C25.4169 198.372 23.2089 199.76 22.3149 200.541C21.4209 201.323 20.2959 201.831 19.8149 201.671C19.3339 201.51 18.8579 201.745 18.7589 202.192C18.6589 202.64 16.7469 204.992 14.5099 207.419C12.2729 209.845 9.71989 213.639 8.83589 215.849C7.92089 218.134 6.7759 219.587 6.1799 219.218C5.5769 218.846 5.42689 219.049 5.82689 219.696C6.59189 220.934 3.63189 226.116 2.54489 225.444C2.17289 225.214 1.80389 225.78 1.72389 226.702C0.947892 235.734 0.0648954 250.558 0.00889542 255.485C-0.0581046 261.4 0.115891 261.824 5.55789 268.985C12.4649 278.075 13.2719 279.656 12.7709 283.116C12.3479 286.04 14.3139 290.699 16.8629 292.815C17.7179 293.525 18.1259 294.617 17.7689 295.242C17.4119 295.867 17.4879 296.045 17.9379 295.638C18.3879 295.23 19.2469 295.299 19.8479 295.791C22.5019 297.967 31.4239 302.26 36.7269 303.914C43.0649 305.89 45.1189 305.617 52.3149 301.842C56.8189 299.479 59.2579 299.818 60.2929 302.95C60.6879 304.144 60.4499 304.132 58.8529 302.879C57.0919 301.498 57.0469 301.516 58.2859 303.097C59.0259 304.042 59.9499 304.717 60.3379 304.597C61.5199 304.232 67.4459 311.534 66.6669 312.395C66.2669 312.838 66.4929 312.882 67.1689 312.493C67.8449 312.104 69.4199 312.342 70.6689 313.021C73.3539 314.482 73.1109 314.439 86.1959 315.708C101.323 317.173 102.22 316.968 114.076 309.32C118.58 306.414 122.529 304.301 122.852 304.625C123.176 304.948 123.44 304.639 123.44 303.939C123.44 303.198 124.09 302.914 124.992 303.261C125.846 303.588 126.283 303.434 125.964 302.918C125.137 301.579 128.948 299.774 131.118 300.477C132.636 300.969 132.69 300.888 131.44 299.989C130.107 299.03 130.107 298.895 131.44 298.776C132.265 298.702 133.311 298.707 133.764 298.785C134.218 298.864 134.335 298.518 134.025 298.017C133.194 296.672 136.141 294.585 137.646 295.453C138.358 295.864 138.624 295.849 138.238 295.42C137.268 294.344 140.181 291.601 141.457 292.39C142.025 292.741 142.366 292.459 142.215 291.765C142.057 291.041 144.203 289.667 147.245 288.545C153.845 286.111 155.62 287.133 153.497 292.143C150.749 298.629 151.002 305.019 154.32 312.916C155.999 316.911 157.093 320.632 156.752 321.184C156.41 321.736 156.598 321.899 157.169 321.546C157.741 321.193 158.789 322.308 159.5 324.025C160.211 325.741 161.883 328.441 163.216 330.024C167.621 335.259 180.65 342.879 185.198 342.879C186.2 342.879 191.277 344.212 196.48 345.841C205.72 348.735 220.149 356.837 218.679 358.307C218.306 358.68 218.849 358.659 219.885 358.262C221.102 357.795 221.537 357.913 221.115 358.596C220.756 359.178 221.019 359.591 221.701 359.516C222.382 359.441 225.52 360.707 228.674 362.33C232.665 364.384 234.033 365.55 233.174 366.167C232.354 366.755 232.658 366.897 234.079 366.588C235.256 366.333 236.749 366.452 237.397 366.852C238.045 367.253 239.637 372.935 240.936 379.48C243.984 394.846 246.664 402.275 249.209 402.421C249.611 402.444 251.515 403.321 253.44 404.37C255.83 405.672 259.166 406.322 263.96 406.419C267.821 406.498 271.876 407.042 272.971 407.628C276.594 409.567 278.712 412.675 278.208 415.314C277.944 416.691 278.117 417.579 278.592 417.285C279.066 416.992 279.663 417.343 279.917 418.066C280.172 418.788 280.876 420.729 281.481 422.379C282.086 424.029 282.559 425.481 282.533 425.606C282.507 425.731 283.488 426.926 284.713 428.261C288.6 432.497 289.44 433.756 289.44 435.339C289.44 437.394 284.127 452.651 281.935 456.889C280.547 459.573 280.357 461.365 280.988 465.813C281.741 471.118 281.855 478.8 281.36 490.879C281.178 495.316 281.724 497.538 284.187 502.379C287.7 509.284 290.455 512.152 295.672 514.331C300.358 516.289 304.51 516.295 309.169 514.348C311.185 513.505 313.444 513.05 314.189 513.336C314.934 513.622 315.298 513.458 314.998 512.972C314.697 512.486 315.188 511.806 316.089 511.46C316.989 511.115 317.774 510.955 317.833 511.105C317.892 511.256 319.065 512.653 320.44 514.21C322.785 516.866 322.953 517.797 323.142 529.21C323.365 542.624 323.545 545.108 324.244 544.409C324.503 544.15 326.072 544.905 327.732 546.087C329.392 547.269 331.693 548.343 332.845 548.474C333.997 548.605 335.275 548.75 335.684 548.796C337.151 548.96 342.494 557.297 341.984 558.626C341.697 559.372 341.865 559.734 342.357 559.43C342.85 559.126 343.559 561.111 343.935 563.84C344.319 566.636 345.846 570.676 347.43 573.091C349.822 576.738 350.296 578.613 350.599 585.63L350.955 593.881L347.796 595.38C346.059 596.205 344.013 596.879 343.25 596.879C342.487 596.879 340.126 597.764 338.004 598.847C335.881 599.929 333.766 600.58 333.304 600.295C332.841 600.009 332.681 600.361 332.947 601.077C333.604 602.846 325.542 611.132 323.81 610.468C323.057 610.178 322.44 610.329 322.44 610.802C322.44 611.275 321.302 611.948 319.91 612.297C318.519 612.646 316.426 614.03 315.26 615.371C314.093 616.713 312.687 617.532 312.135 617.19C311.577 616.846 311.439 617.069 311.825 617.693C312.206 618.31 311.163 620.233 309.507 621.966C307.85 623.7 305.087 627.312 303.366 629.995C301.645 632.677 299.832 634.621 299.338 634.316C298.844 634.011 298.44 634.425 298.44 635.237C298.44 636.048 298.103 636.862 297.69 637.046C295.391 638.068 291.412 645.188 291.127 648.791C290.95 651.021 291.011 652.642 291.261 652.392C292.002 651.651 305.936 661.849 305.985 663.169C306.01 663.834 306.56 664.271 307.206 664.139C307.852 664.007 309.984 664.987 311.943 666.317C313.903 667.647 316.845 669.029 318.482 669.388C320.118 669.748 321.26 670.361 321.019 670.751C320.778 671.142 322.011 671.301 323.76 671.106C326.119 670.843 328.037 671.564 331.19 673.902C333.527 675.634 335.44 677.715 335.44 678.525C335.44 679.334 335.867 679.733 336.39 679.41C337.375 678.801 340.045 682.753 339.628 684.203C339.497 684.657 339.793 684.779 340.286 684.474C341.468 683.744 350.644 693.739 349.899 694.945C349.582 695.459 349.722 695.879 350.212 695.879C350.702 695.879 351.696 696.989 352.422 698.345C353.148 699.701 354.124 700.575 354.591 700.286C355.381 699.798 355.865 701.296 355.534 703.203C355.455 703.657 355.821 703.761 356.348 703.436C356.875 703.11 358.107 704.199 359.085 705.856C360.265 707.853 361.888 709.034 363.902 709.359C367.183 709.89 372.525 709.633 371.87 708.976C371.648 708.754 373.173 706.723 375.258 704.461C377.342 702.2 380.109 698.462 381.405 696.155C382.702 693.848 384.21 692.237 384.756 692.574C385.302 692.912 385.45 692.705 385.085 692.114C384.72 691.523 384.988 690.435 385.681 689.694C386.373 688.954 387.794 686.676 388.838 684.632C390.706 680.973 394.704 677.546 397.104 677.546C397.778 677.546 398.241 677.274 398.134 676.943C397.447 674.813 405.519 668.192 407.392 669.349C407.892 669.658 408.627 669.385 409.025 668.741C409.477 668.01 409.316 667.838 408.595 668.284C407.96 668.676 407.44 668.524 407.44 667.946C407.44 667.369 408.295 666.362 409.34 665.709C410.425 665.032 410.996 663.885 410.67 663.037C410.27 661.994 410.495 661.795 411.425 662.369C412.229 662.867 412.508 662.798 412.135 662.194C411.435 661.062 414.455 650.697 415.755 649.767C416.226 649.431 416.63 648.756 416.653 648.267C416.676 647.779 416.925 646.779 417.206 646.045C417.633 644.933 417.877 644.933 418.673 646.045C419.374 647.024 419.469 646.889 419.031 645.538C418.309 643.315 422.115 637.56 423.671 638.522C424.287 638.903 424.462 638.723 424.078 638.103C423.709 637.506 423.89 636.719 424.481 636.354C425.071 635.989 427.484 633.038 429.843 629.797C432.201 626.555 434.463 624.235 434.869 624.641C435.275 625.047 435.466 624.929 435.294 624.379C434.904 623.132 438.586 616.851 439.409 617.36C439.74 617.565 440.091 616.978 440.189 616.056C440.287 615.133 440.895 609.328 441.541 603.155C442.188 596.982 443.099 592.168 443.567 592.457C444.034 592.746 444.156 592.303 443.837 591.472C443.078 589.494 445.334 582.696 446.509 583.422C447.009 583.73 447.186 583.379 446.902 582.642C446.266 580.982 451.597 572.794 456.268 568.257C459.644 564.979 462.291 563.692 460.845 566.034C460.399 566.755 460.571 566.916 461.302 566.464C461.946 566.066 462.256 565.39 461.99 564.961C461.725 564.532 462.73 563.562 464.224 562.806C465.718 562.05 468.005 560.638 469.308 559.669C470.61 558.699 472.185 558.197 472.808 558.553C473.43 558.909 473.618 558.843 473.224 558.406C472.154 557.221 479.967 551.938 485.815 549.892C488.634 548.906 494.379 546.326 498.582 544.158L506.224 540.217L528.582 538.95C549.034 537.792 551.293 537.48 555.085 535.301C557.364 533.99 560.397 531.53 561.825 529.834C563.252 528.137 564.87 527.027 565.419 527.366C565.976 527.71 566.177 527.357 565.873 526.566C565.559 525.746 566.648 524.04 568.462 522.514C570.184 521.065 571.279 519.879 570.894 519.879C570.51 519.879 570.751 519.209 571.431 518.39C572.111 517.571 573.06 517.144 573.542 517.442C574.023 517.739 574.121 517.211 573.759 516.267C573.315 515.11 573.478 514.784 574.259 515.267C575.015 515.735 575.211 515.445 574.822 514.431C574.493 513.575 574.749 512.879 575.392 512.879C576.033 512.879 576.321 512.495 576.03 512.025C575.201 510.683 581.012 502.201 584.127 500.206C585.674 499.215 587.561 497.811 588.319 497.084C589.077 496.358 590.309 495.999 591.057 496.286C591.804 496.572 592.321 496.486 592.206 496.093C592.09 495.7 592.732 494.254 593.633 492.879C594.533 491.504 596.685 485.429 598.415 479.379C601.521 468.514 605.806 459.369 607.345 460.32C609.249 461.497 612.308 456.53 614.187 449.213C619.789 427.395 620.613 421.418 620.345 404.567C620.204 395.664 620.198 384.724 620.333 380.257L620.578 372.136L626.034 369.464C629.036 367.995 631.999 367.106 632.62 367.49C633.31 367.917 633.472 367.74 633.035 367.034C632.602 366.333 633.033 365.835 634.131 365.767C644.113 365.15 645.903 363.722 649.971 353.129C651.503 349.142 653.135 345.879 653.598 345.879C654.061 345.879 654.44 345.177 654.44 344.32C654.44 343.396 654.91 343.052 655.595 343.474C656.266 343.89 656.479 343.751 656.103 343.143C655.748 342.569 656.534 340.137 657.85 337.739C659.166 335.341 660.557 331.875 660.941 330.036C661.477 327.472 662.442 326.358 665.084 325.254C666.978 324.463 669.028 324.124 669.639 324.502C670.358 324.947 670.464 324.727 669.938 323.876C669.334 322.899 669.678 322.708 671.285 323.128C672.472 323.439 673.191 323.284 672.882 322.786C672.574 322.287 672.744 321.879 673.26 321.879C673.776 321.879 676.599 319.589 679.534 316.79C685.659 310.947 695.04 305.481 692.845 309.034C692.399 309.755 692.571 309.916 693.302 309.464C693.946 309.066 694.245 308.373 693.967 307.923C693.689 307.474 694.132 306.55 694.95 305.87C695.769 305.191 697.877 302.018 699.636 298.82C701.394 295.621 703.307 293.273 703.887 293.602C704.466 293.931 704.606 293.831 704.199 293.381C703.791 292.931 703.861 292.072 704.354 291.471C704.847 290.87 706.028 287.679 706.978 284.379C707.929 281.079 709.321 277.491 710.073 276.406C712.106 273.473 711.763 269.266 708.44 256.379C706.79 249.98 705.44 242.48 705.44 239.713C705.44 234.75 703.051 227.879 701.326 227.879C700.839 227.879 700.433 227.091 700.425 226.129C700.395 222.686 698.68 221.646 691.809 220.898C686.553 220.327 684.565 220.476 683.342 221.532C681.956 222.73 680.632 222.331 673.342 218.515C668.721 216.096 665.052 213.613 665.19 212.998C665.327 212.383 665.102 211.932 664.69 211.997C662.531 212.338 662.266 211.718 663.999 210.377C665.744 209.026 665.756 208.939 664.114 209.513C662.784 209.978 661.428 209.107 659.114 206.299C657.368 204.181 656.071 201.757 656.232 200.913C656.443 199.802 656.291 199.719 655.683 200.612C655.085 201.489 653.851 200.622 651.41 197.612C646.428 191.469 642.557 187.809 637.133 184.114C634.238 182.143 632.619 180.398 633.045 179.71C633.494 178.982 633.302 178.846 632.513 179.334C631.776 179.79 630.202 179.115 628.609 177.661C624.433 173.849 612.212 171.002 597.94 170.516C588.254 170.186 576.058 167.306 577.114 165.598C577.498 164.976 577.252 164.877 576.491 165.347C575.008 166.264 565.265 161.971 566.028 160.736C566.312 160.277 565.934 160.136 565.19 160.422C564.445 160.707 562.233 159.339 560.275 157.381C556.425 153.531 556.503 153.546 542.29 153.915C535.485 154.092 532.819 153.735 529.79 152.241C527.673 151.197 526.064 149.755 526.215 149.036C526.366 148.318 526.045 148.005 525.501 148.341C524.397 149.023 519.784 144.846 520.215 143.555C520.366 143.101 520.079 142.984 519.578 143.294C518.261 144.108 516.132 141.187 517.008 139.768C517.439 139.072 517.326 138.831 516.74 139.194C514.923 140.317 509.512 132.557 510.186 129.796C510.265 129.475 509.791 129.166 509.134 129.11C498.998 128.239 486.377 124.705 482.44 121.635C480.328 119.988 479.008 119.788 473.94 120.347C470.64 120.712 466.488 121.859 464.714 122.897C461.943 124.517 461.289 124.585 460.083 123.379C459.31 122.606 458.438 122.214 458.145 122.508C457.193 123.459 453.897 121.101 452.481 118.456C451.723 117.039 450.719 115.879 450.251 115.879C449.783 115.879 447.722 114.829 445.67 113.546C443.619 112.262 440.567 111.219 438.889 111.227C437.21 111.236 435.363 110.949 434.782 110.591C434.202 110.232 432.662 110.144 431.359 110.395L428.991 110.851L431.466 108.412C435.866 104.075 436.44 103.023 436.44 99.3026C436.44 96.6616 437.275 94.6916 439.44 92.2256C442.657 88.5626 443.498 82.7236 441.379 78.7646C440.079 76.3356 435.919 74.5516 432.059 74.7686C427.617 75.0176 425.717 74.0626 423.49 70.4586C421.49 67.2236 420.516 63.9016 422.44 66.8786C422.973 67.7036 423.416 67.8716 423.425 67.2506C423.433 66.6306 422.827 65.6146 422.077 64.9926C421.283 64.3326 420.427 60.6897 420.025 56.2547C419.645 52.0647 418.186 45.6667 416.776 42.0127C415.368 38.3637 414.192 34.8407 414.161 34.1847C414.131 33.5277 413.844 33.0647 413.523 33.1567C413.203 33.2487 411.734 32.5177 410.261 31.5327C408.651 30.4567 406.256 29.8686 404.261 30.0596C401.217 30.3516 400.225 31.4577 392.369 43.3127C382.587 58.0757 381.788 58.6346 367.333 60.8416C358.831 62.1406 358.656 62.1247 352.962 59.5177C346.429 56.5267 343.346 56.2816 337.225 58.2706C334.868 59.0366 329.198 59.9497 324.624 60.2997C318.207 60.7907 315.402 61.5087 312.337 63.4437C310.153 64.8227 307.82 65.6377 307.153 65.2547C306.486 64.8717 306.274 64.9266 306.681 65.3766C307.089 65.8266 306.918 66.8026 306.301 67.5466C305.422 68.6056 302.872 68.7586 294.537 68.2516C284.829 67.6626 283.519 67.7977 279.599 69.7977C277.236 71.0027 273.116 72.2477 270.443 72.5647C265.883 73.1047 265.349 72.9177 261.762 69.5177C259.66 67.5257 257.579 65.8916 257.139 65.8876C256.338 65.8786 256.371 55.4377 257.179 53.1917C257.414 52.5387 258.317 52.2777 259.187 52.6117C260.233 53.0137 260.524 52.8226 260.045 52.0486C259.611 51.3466 259.945 50.8787 260.881 50.8787C261.738 50.8787 262.344 50.5407 262.228 50.1287C262.111 49.7167 262.606 48.3116 263.328 47.0076C265.988 42.2016 263.723 33.3286 256.385 19.8076C255.319 17.8436 254.058 14.1596 253.584 11.6196C253.109 9.07965 251.533 5.58965 250.081 3.86365C248.628 2.13765 247.44 1.07465 247.44 1.50165C247.44 1.92865 246.9 1.73865 246.24 1.07865C244.795 -0.366354 242.715 -0.359349 239.69 1.09865Z"
                fill="none"
                stroke="currentColor"
                strokeWidth="1.5"
                className="text-muted-foreground/30"
                strokeLinecap="round"
                strokeLinejoin="round"
              />

              <path
                d={`M ${locations[0].x * 8} ${locations[0].y * 6} L ${locations[1].x * 8} ${locations[1].y * 6} L ${locations[2].x * 8} ${locations[2].y * 6} L ${locations[3].x * 8} ${locations[3].y * 6}`}
                stroke="currentColor"
                strokeWidth="2"
                fill="none"
                className="text-primary/40 connection-path"
                strokeDasharray="4,4"
              />

              {locations.map((location) => (
                <g
                  key={location.id}
                  className="location-pin"
                  transform={`translate(${location.x * 8}, ${location.y * 6})`}
                >
                  <circle r="20" fill="currentColor" className="text-primary/20" />
                  <circle r="12" fill="currentColor" className="text-primary" />
                  <circle r="4" fill="white" />
                  <text
                    y="-25"
                    textAnchor="middle"
                    className="text-sm font-bold fill-current pointer-events-none"
                    style={{
                      fontSize: "14px",
                    }}
                  >
                    {location.name}
                  </text>
                </g>
              ))}
            </svg>
          </div>
        </div>
      </div>
    </section>
  )
}
